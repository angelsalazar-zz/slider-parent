<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="highlight-behavior.html">

<dom-module id="slider-switch">
   <template>
     <style>
         :host {
             display: block;
         }
         .switch{
             position: absolute;
             margin-left: -5px;
             height: 100%;
             width: 10px;
             stroke: #90CAF9;
             stroke-width: 2;
             fill: #90CAF9;
         }
         .switch:hover{
             stroke: #1565C0;
             fill: #1565C0;
         }

         .highlighted {
           stroke: #FF9800;
           fill: #FF9800;
         }
    </style>
    <svg class="switch" style$="left:{{pos}}px">
        <polygon points$="{{points}}" />
    </svg>
  </template>
   <script>
       Polymer({
           is: 'slider-switch',
          //  behaviors: [HighlightBehavior],
           listeners: {
             tap: 'handleTap'
           },
           setPosition : function(pos){
             this.pos = pos;
           },
           properties:{
               up:{
                   type: Boolean,
                   observer: '_upChanged'
               },
               pos:{
                   type: Number,
                   value: 0,
                   reflectToAttribute: true
               },
               points: {
                    type: String,
                   value: "1,1 9,1 5,9"
               },//
               isSelected: {
                 type: Boolean,
                 value: false,
                 notify: true,
                 reflectToAttribute: true,
                 observer: '_isSelectedChanged'
               },
               isBottom:{
                 type:Boolean,
                 value:false,
                 reflectToAttribute: true
               },
               isTrackSource:{
                 type: Boolean,
                 value: false
               }
           },
          //  handleTrack: function(e){
          //      this._moveSlider(e);
          //  },
          //  _moveSlider:function(e){
          //      var elementPos = $(e.currentTarget).parent().offset();
          //      var posX = e.detail.x - elementPos.left;
          //      if(posX >= 0 && posX <= $(e.currentTarget).parent().width()){
          //          $(e.currentTarget).css('left', posX+'px');
          //          this.pos = posX;
          //      }
          //  },
           _upChanged:function(newUp){
               if(newUp)
                   this.points = "1,9 9,9 5,1";

           },
           handleTap : function(e){
             if (!this.isBottom){
                this.isSelected = !this.isSelected;
             }
           },
           _isSelectedChanged : function () {
             var _switch = this.$$('.switch');
            $(_switch).toggleClass("highlighted");
           }
       });
  </script>
</dom-module>
